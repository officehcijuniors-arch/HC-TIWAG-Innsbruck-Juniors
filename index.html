<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<title>HC TIWAG Innsbruck Juniors - Infosäule</title>

<!-- =================== STYLES =================== -->
<style>
/* Grundlayout der Seite: kein Abstand, Scrollen verhindern, Schrift und Farben setzen */
body { 
  margin: 0; 
  overflow: hidden; 
  font-family: "Areno Serif", serif; 
  color: #fff; 
  background: #000; 
}

/* Jede "Seite" der Infosäule wird absolut positioniert und zunächst unsichtbar */
.page { 
  position: absolute; 
  inset: 0; 
  opacity: 0; 
  pointer-events: none; 
  transition: opacity 1s ease; /* sanftes Einblenden */
}

/* Aktive Seite sichtbar machen */
.page.active { 
  opacity: 1; 
  pointer-events: all; 
  z-index: 1; 
}

/* Grundstil für eingebettete iframes und Videos: volle Fläche, abgerundete Ecken, Schatten */
.calendar-page iframe, 
.org-page iframe, 
.video-page video, 
.page iframe { 
  width: 100%; 
  height: 100%; 
  border: 0; 
  border-radius: 15px; 
  box-shadow: 0 15px 30px rgba(0,0,0,0.6); 
}

/* Videos an Container anpassen */
.video-page video { 
  object-fit: contain; 
}

/* Signatur unten rechts mit animiertem Glanzeffekt */
.signature { 
  position: fixed; 
  bottom: 10px; 
  right: 15px; 
  font-size: 0.9em; 
  font-weight: bold; 
  color: rgba(255,255,255,0.35); 
  pointer-events: none; /* kein Klick möglich */
  z-index: 9999; 
  background: linear-gradient(120deg, rgba(255,255,255,0.6), rgba(255,255,255,0.1), rgba(255,255,255,0.6)); 
  -webkit-background-clip: text; 
  -webkit-text-fill-color: transparent; 
  animation: shine 3s linear infinite; /* endlose Animation */
}

/* Animation für die Signatur */
@keyframes shine { 
  0% { background-position: -200% 0; } 
  100% { background-position: 200% 0; } 
}
</style>
</head>
<body>

<!-- =================== SEITENSTRUKTUR =================== -->

<!-- Seite 1: Infopoint -->
<section class="page page-1 active">
  <iframe src="Infopoint.html" frameborder="0" scrolling="no"></iframe>
</section>

<!-- Seite 2: Kalender -->
<section class="page calendar-page page-2">
  <iframe src="KALENDER.html" frameborder="0" scrolling="no"></iframe>
</section>

<!-- Seite 3: Organigramm -->
<section class="page org-page page-3">
  <iframe src="ORG.html" frameborder="0" scrolling="no"></iframe>
</section>

<!-- Seiten 4-6: Videos -->
<section class="page video-page page-4">
  <video autoplay loop muted playsinline preload="none" class="zoom-video">
    <source data-src="Fotoshop.webm" type="video/mp4">
  </video>
</section>

<section class="page video-page page-5">
  <video autoplay loop muted playsinline preload="none" class="zoom-video">
    <source data-src="Fanshop.webm" type="video/mp4">
  </video>
</section>

<section class="page video-page page-6">
  <video autoplay loop muted playsinline preload="none" class="zoom-video">
    <source data-src="HCINWSPPräs.mp4" type="video/mp4">
  </video>
</section>

<!-- Seite 7: Spielerfotos -->
<section class="page page-7">
  <iframe src="spielerfotos.html" frameborder="0" scrolling="no"></iframe>
</section>

<!-- Seiten 8-9: Platzhalter für zukünftige Inhalte -->
<section class="page video-page page-8"></section>
<section class="page video-page page-9"></section>

<!-- Signatur -->
<footer class="signature">MS</footer>

<!-- =================== JAVASCRIPT =================== -->
<script>
window.addEventListener('DOMContentLoaded', async () => {
  const pages = document.querySelectorAll('.page'); // Alle Seiten erfassen
  let current = 0; // Startseite
  
  // JSON mit Einstellungen von GitHub laden
  const settingsUrl = 'https://raw.githubusercontent.com/officehcijuniors-arch/HC-TIWAG-Innsbruck-Juniors/main/settings.json'; 
  let settings; 
  try { 
    const res = await fetch(settingsUrl); 
    settings = await res.json(); 
  } catch(err){ 
    console.error('❌ Fehler beim Laden der Einstellungen:', err); 
    return; 
  }

  // Nur die Seiten aktivieren, die in settings.json eingeschaltet sind
  function getActivePages() {
    const arr = [];
    for (let i = 1; i <= 9; i++) if (settings.pages[i] && settings.pages[i].enabled) arr.push(i-1);
    return arr;
  }

  // Dauer jeder Seite in Millisekunden aus settings.json
  function getDurations() {
    const d = {};
    for (let i = 1; i <= 9; i++) if (settings.pages[i]) d[i-1] = settings.pages[i].duration*1000;
    return d;
  }

  // Videos "lazy loaden" (erst beim Anzeigen die Quelle setzen)
  function loadVideo(page){
    const video = page.querySelector('video');
    if(!video) return;
    const source = video.querySelector('source');
    if(source.dataset.src){
      source.src = source.dataset.src; 
      video.load(); 
    }
  }

  // Seite sichtbar machen
  function showPage(index){
    pages.forEach((p,i)=>p.classList.toggle('active',i===index));
    const page = pages[index];
    if(page.classList.contains('video-page')) loadVideo(page); 
  }

  // Nächste Seite nach Dauer automatisch anzeigen
  function rotateToNext(){
    const active = getActivePages();
    const durations = getDurations();
    if(active.length===0) return;
    let pos = active.indexOf(current);
    if(pos===-1) pos=0;
    const next = active[(pos+1)%active.length];
    current = next;
    showPage(current);
    setTimeout(rotateToNext, durations[current]||5000); // Standard 5 Sekunden
  }

  const activePages = getActivePages(); 
  current = activePages.length>0 ? activePages[0] : 0; 
  showPage(current); 
  rotateToNext(); 

  // Optional: Seite nach bestimmter Zeit neu laden
  if(settings.reload && settings.reload>0) setInterval(()=>location.reload(), settings.reload*60*1000); 
});
</script>

</body>
</html>

