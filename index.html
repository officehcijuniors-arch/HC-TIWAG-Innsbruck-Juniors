<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>HC TIWAG Innsbruck Juniors Infosäule</title>
  <style>
    body,html{margin:0;padding:0;width:100%;height:100%;overflow:hidden;font-family:Arial,sans-serif;background:linear-gradient(135deg,#004080,#e60000);color:white;}
    .page{display:none;justify-content:center;align-items:center;width:100%;height:100%;}
    .page.active{display:flex;}
    .start-page{flex-direction:column;text-align:center;}
    .start-page h1{font-size:4em;text-shadow:2px 2px 5px black;}
    .logo-row{display:flex;justify-content:space-around;align-items:center;width:100%;}
    .logo-row img{max-height:120px;}
    .glow{font-size:3em;color:white;text-shadow:0 0 20px #fff,0 0 30px #ff0000,0 0 40px #ff0000;animation:glow 2s ease-in-out infinite alternate;}
    @keyframes glow{from{text-shadow:0 0 10px #fff,0 0 20px #ff0000;}to{text-shadow:0 0 20px #fff,0 0 40px #ff0000;}}
    iframe{border:0;width:90%;height:90%;}
    .org-page img{width:100%;height:100%;object-fit:cover;} /* <-- geändert */
    .video-page video{width:90%;height:auto;}
    .admin-panel{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);color:white;display:none;flex-direction:column;padding:20px;overflow:auto;z-index:9999;}
    .admin-panel h2{margin-top:0;}
    .admin-panel label{display:block;margin:5px 0;}
    .admin-panel input[type=number]{width:60px;}
    .close-btn{margin-top:20px;padding:10px;background:#e60000;border:none;color:white;cursor:pointer;}
  </style>
</head>
<body>
  <div class="page start-page page-1 active">
    <div class="logo-row">
      <img src="logo1.png" alt="Logo1">
      <img src="logo2.png" alt="Logo2">
    </div>
    <h1 class="glow">INFOSÄULE</h1>
    <img src="hai.gif" alt="Hai" style="max-height:200px;">
  </div>

  <div class="page cal-page page-2">
    <iframe src="https://calendar.google.com/calendar/embed?src=de.austrian%23holiday%40group.v.calendar.google.com&ctz=Europe%2FVienna"></iframe>
  </div>

  <div class="page org-page page-3">
    <img src="ORG.png" alt="Organigramm Vollbild">
  </div>

  <div class="page video-page page-4">
    <video src="video.mp4" controls autoplay loop></video>
  </div>

  <div class="page page-5"><h1>Video/Fotos Platzhalter 5</h1></div>
  <div class="page page-6"><h1>Platzhalter 6</h1></div>
  <div class="page page-7"><h1>Platzhalter 7</h1></div>
  <div class="page page-8"><h1>Platzhalter 8</h1></div>
  <div class="page page-9"><h1>Platzhalter 9</h1></div>

  <div class="admin-panel" id="adminPanel">
    <h2>Admin Einstellungen</h2>
    <div>
      <h3>Seiten aktivieren/deaktivieren</h3>
      <label><input type="checkbox" data-page="1" checked> Startseite</label>
      <label><input type="checkbox" data-page="2" checked> Kalender</label>
      <label><input type="checkbox" data-page="3" checked> Organigramm</label>
      <label><input type="checkbox" data-page="4" checked> Video</label>
      <label><input type="checkbox" data-page="5" checked> Seite 5</label>
      <label><input type="checkbox" data-page="6" checked> Seite 6</label>
      <label><input type="checkbox" data-page="7" checked> Seite 7</label>
      <label><input type="checkbox" data-page="8" checked> Seite 8</label>
      <label><input type="checkbox" data-page="9" checked> Seite 9</label>
    </div>
    <div>
      <h3>Anzeigedauer pro Seite (Sekunden)</h3>
      <label>Seite 1: <input type="number" data-page="1" value="5"></label>
      <label>Seite 2: <input type="number" data-page="2" value="5"></label>
      <label>Seite 3: <input type="number" data-page="3" value="5"></label>
      <label>Seite 4: <input type="number" data-page="4" value="5"></label>
      <label>Seite 5: <input type="number" data-page="5" value="5"></label>
      <label>Seite 6: <input type="number" data-page="6" value="5"></label>
      <label>Seite 7: <input type="number" data-page="7" value="5"></label>
      <label>Seite 8: <input type="number" data-page="8" value="5"></label>
      <label>Seite 9: <input type="number" data-page="9" value="5"></label>
    </div>
    <div>
      <h3>Automatischer Reload (Minuten, 0=aus)</h3>
      <input type="number" id="reloadInterval" value="0">
    </div>
    <button class="close-btn" onclick="document.getElementById('adminPanel').style.display='none'">Schließen</button>
  </div>

<script>
document.addEventListener('DOMContentLoaded',()=>{
  const pages=document.querySelectorAll('.page');
  let current=0;
  let rotationTimeout=null;
  let reloadTimer=null;
  const adminPanel=document.getElementById('adminPanel');
  let adminOpen=false;
  const checkboxes=adminPanel.querySelectorAll('input[type=checkbox]');
  const durationInputs=adminPanel.querySelectorAll('input[type=number][data-page]');
  const reloadInput=document.getElementById('reloadInterval');

  function saveSettings(){
    const settings={pages:{},reload:parseInt(reloadInput.value)||0};
    checkboxes.forEach(cb=>{
      if(!settings.pages[cb.dataset.page]) settings.pages[cb.dataset.page]={};
      settings.pages[cb.dataset.page].enabled=cb.checked;
    });
    durationInputs.forEach(inp=>{
      if(!settings.pages[inp.dataset.page]) settings.pages[inp.dataset.page]={};
      settings.pages[inp.dataset.page].duration=parseInt(inp.value)||5;
    });
    localStorage.setItem('adminSettings', JSON.stringify(settings));
  }

  function loadSettings(){
    const saved=JSON.parse(localStorage.getItem('adminSettings')||'{}');
    if(saved.pages){
      checkboxes.forEach(cb=>{
        if(saved.pages[cb.dataset.page] && typeof saved.pages[cb.dataset.page].enabled!=='undefined') cb.checked=saved.pages[cb.dataset.page].enabled;
      });
      durationInputs.forEach(inp=>{
        if(saved.pages[inp.dataset.page] && typeof saved.pages[inp.dataset.page].duration!=='undefined') inp.value=saved.pages[inp.dataset.page].duration;
      });
    }
    if(saved.reload!==undefined) reloadInput.value=saved.reload;
  }

  loadSettings();

  function getActivePageIndexes(){
    const active=[];
    checkboxes.forEach(cb=>{ if(cb.checked) active.push(parseInt(cb.dataset.page)-1); });
    return active;
  }

  function getDurations(){
    const durations={};
    durationInputs.forEach(inp=>{
      const sec=parseInt(inp.value)||5;
      durations[parseInt(inp.dataset.page)-1]=sec*1000;
    });
    return durations;
  }

  function showPage(index){
    pages.forEach((p,i)=>p.classList.toggle('active',i===index));
  }

  function startRotation(){
    if(rotationTimeout) return;
    rotateToNext();
  }

  function rotateToNext(){
    if(adminOpen) return;
    const active=getActivePageIndexes();
    const durations=getDurations();
    if(active.length===0) return;
    let pos=active.indexOf(current);
    if(pos===-1) pos=0;
    const next=active[(pos+1)%active.length];
    current=next;
    showPage(current);
    rotationTimeout=setTimeout(()=>{ rotationTimeout=null; rotateToNext(); }, durations[current] || 5000);
  }

  function stopRotation(){ if(rotationTimeout){ clearTimeout(rotationTimeout); rotationTimeout=null; } }

  function startReloadTimer() {
    if(reloadTimer){ clearInterval(reloadTimer); reloadTimer=null; }
    const mins=parseInt(reloadInput.value)||0;
    if(mins>0){
      reloadTimer=setInterval(()=>{ location.reload(); }, mins*60*1000);
    }
  }
  reloadInput.addEventListener('input', ()=>{
    startReloadTimer();
    saveSettings();
  });
  startReloadTimer();

  (function initStart(){
    const active=getActivePageIndexes();
    current=active.length>0?active[0]:0;
    showPage(current);
    startRotation();
  })();

  checkboxes.forEach(cb=>{
    cb.addEventListener('change',()=>{
      saveSettings();
      const active=getActivePageIndexes();
      if(active.length>0){ current=active[0]; showPage(current); }
    });
  });

  durationInputs.forEach(inp=>{
    inp.addEventListener('input', saveSettings);
  });

  let mTimer=null;
  function openAdmin(){ adminOpen=true; stopRotation(); adminPanel.style.display='flex'; }
  function closeAdmin(){ adminOpen=false; adminPanel.style.display='none'; startRotation(); }
  document.addEventListener('keydown',(e)=>{
    if(e.key.toLowerCase()==='m'){ if(!mTimer){ mTimer=setTimeout(()=>{ openAdmin(); mTimer=null; },2000); } }
    if(e.key==='Escape'){ if(adminOpen) closeAdmin(); }
  });
  document.addEventListener('keyup',(e)=>{ if(e.key.toLowerCase()==='m'){ if(mTimer){ clearTimeout(mTimer); mTimer=null; } } });
});
</script>
</body>
</html>
