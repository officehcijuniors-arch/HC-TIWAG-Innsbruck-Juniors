<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vidaa-TV Seitenrotation</title>
<style>
  /* =====================
     Grundlayout
     ===================== */
  body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;        /* Kein Scrollen */
    background-color: #000;  /* schwarzer Hintergrund */
    font-family: Arial, sans-serif;
  }

  /* =====================
     Jede Seite
     ===================== */
  .page {
    position: absolute;      /* Alle Seiten übereinander */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;              /* standardmäßig unsichtbar */
    transition: opacity 1s ease-in-out; /* sanftes Ein-/Ausblenden */
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 2rem;
    background-size: cover;
    background-position: center;
  }

  /* Aktive Seite sichtbar */
  .page.active {
    opacity: 1;
    z-index: 1; /* liegt über allen anderen Seiten */
  }

  /* Info-Text für Laien (unten links) */
  .info-text {
    position: absolute;
    bottom: 10px;
    left: 10px;
    color: #ccc;
    font-size: 1rem;
    background-color: rgba(0,0,0,0.4);
    padding: 5px 10px;
    border-radius: 5px;
  }
</style>
</head>
<body>

<!-- Container für alle Seiten -->
<div id="pages-container"></div>

<!-- Info-Text für Laien -->
<div class="info-text">
  Seitenrotation aktiv. Seiten werden automatisch angezeigt.
</div>

<script>
/* ================================
   JSON-Datei: Steuert alle Seiten
   unverändert übernommen
   ================================ */
const jsonData = {
  "pages": {
    "1": { "enabled": true, "duration": 10, "note": "Startseite / Infosäule", "preload": false },
    "2": { "enabled": true, "duration": 30, "note": "Kalender / Eisplan", "preload": false },
    "3": { "enabled": true, "duration": 15, "note": "Organigramm", "preload": false },
    "4": { "enabled": false, "duration": 23, "note": "Fotoshop", "preload": false },
    "5": { "enabled": false, "duration": 20, "note": "FANSHOP Video", "preload": false },
    "6": { "enabled": false, "duration": 7, "note": "CANVA Spielankündigungen Juniors", "preload": false },
    "7": { "enabled": false, "duration": 50, "note": "Spielerfotos", "preload": true, "liteMode": true },
    "8": { "enabled": false, "duration": 8, "note": "Platzhalter 8" },
    "9": { "enabled": false, "duration": 8, "note": "Platzhalter 9" }
  },
  "reload": 60, // Seiten neu laden alle 60 Minuten
  "options": {
    "lazyVideoLoad": true,
    "lazyIframeLoad": true,
    "limitAnimations": true,
    "backgroundAnimation": false,
    "imageFormat": "webp",
    "maxImageResolution": 1600,
    "debug": false
  }
};

/* ================================
   Seiten vorbereiten
   ================================ */
const container = document.getElementById('pages-container');
const pagesArray = []; // Array für alle aktiven Seiten

for (let key in jsonData.pages) {
  const pageData = jsonData.pages[key];

  // Nur Seiten anzeigen, die aktiviert sind
  if (pageData.enabled) {
    const div = document.createElement('div');
    div.classList.add('page');
    div.id = `page-${key}`;
    
    // Zeige den "note"-Text als Inhalt (für Laien sichtbar)
    div.textContent = pageData.note;

    // Optional: preload-Inhalte (Bilder/Videos) könnten hier geladen werden
    if (pageData.preload) {
      // Beispiel: Hintergrundbild laden
      // div.style.backgroundImage = "url('deinBild.webp')";
    }

    container.appendChild(div);
    pagesArray.push({ el: div, duration: pageData.duration * 1000 });
  }
}

/* ================================
   Seitenwechsel-Funktion
   ================================ */
let currentIndex = 0;

// Funktion: Eine Seite sichtbar machen
function showPage(index) {
  pagesArray.forEach((page, i) => {
    // Nur die aktuelle Seite bekommt die Klasse "active"
    page.el.classList.toggle('active', i === index);
  });
}

/* ================================
   Automatische Rotation
   ================================ */
function startRotation() {
  showPage(currentIndex); // aktuelle Seite anzeigen

  // Nach Ablauf der Dauer, nächste Seite anzeigen
  setTimeout(() => {
    currentIndex = (currentIndex + 1) % pagesArray.length; // zyklisch wechseln
    startRotation(); // wiederholen für endlose Rotation
  }, pagesArray[currentIndex].duration);
}

/* ================================
   Auto-Reload alle x Minuten
   ================================ */
if (jsonData.reload) {
  setInterval(() => location.reload(), jsonData.reload * 1000 * 60);
}

/* ================================
   Starte die Rotation
   ================================ */
startRotation();

</script>
</body>
</html>
